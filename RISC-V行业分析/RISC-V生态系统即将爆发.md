# RISC-V生态系统即将爆发

近一年来，开源指令集架构RISC-V，备受瞩目。不少公司以RISC-V架构开发产品，英特尔将RISC-V IP纳入了该公司的晶圆代工服务中，甚至传出连苹果公司也有意利用RISC-V架构开发产品。

RISC-V是一种基于精简指令集计算 (RISC) 原理的 ISA。与大多数其它ISA设计不同，它是在开源许可下提供的，无需付费即可使用。

RISC-V项目于2010年在加州大学伯克利分校与非该大学附属的志愿者贡献者一起启动。它与主要用于教育目的的原始 ISA 不同，RISC-V 适用于商业和学术部署。正式的 RISC-V 基金会（更名为 RISC-V International）拥有、维护和发布 RISC-V 定义。

在技术层面，RISC-V遵循既定的 RISC 原则并使用加载存储架构。这样做的一个优点是不会侵犯任何已知的专利。与许多其它ISA一样，RISC-V定义了不同级别的指令集。这包括 32 位和 64 位变体，以及支持浮点指令的扩展。这允许开发适合各种应用的版本，从小型嵌入式微控制器到台式个人计算机和带有矢量处理器的超级计算机。

许多语言编译器都支持 RISC-V，包括 GNU Compiler Collection (GCC)，以及 Linux 操作系统（32 位和 64 位）。许多公司正在提供或已经推出 RISC-V 硬件，从微控制器到可以运行 Linux 的 SOM 和 SoC，以及可以包含 RISC-V 内核的 FPGA。



## RISC-V将撼动86亿美元的IP市场

据Counterpoint Research统计，全球半导体 IP 市场正接近拐点，因为解决方案中半导体含量的比例正在加快，**计算**、**内存**、**安全**和其他架构需要多样化和开放的方法。这种需求主要受到高级应用程序增长的推动，例如支持 AI 的智能设备、5G 通信、高性能计算 (HPC) 和自动驾驶汽车。半导体含量的增长将推动 IC 设计和 IP 许可行业的产品价值增长。”

根据 Counterpoint Research 的报告“ **RISC-V采用加快步伐**”，到2025年，全球半导体 IP 市场规模将以 11% 的复合年增长率增长至86亿美元。该市场的主导者包括Arm、Synopsys、Cadence 和 CEVA等。后起之秀RISC-V凭借其先天优势，具有非常大的发展和突破空间。

## 生态系统建设最新进展

最为新生的处理器架构，最重要的就是生态系统建设。近一年来，特别是最近两三个月内，RISC-V处理器、开发工具、开源计划等不断发出，为其生态系统建设增加了非常有分量的砝码。

首先看中国的，近两三个月内，关于RISC-V的重磅消息不断。



### 华为海思自研RISC-V架构CPU

华为海思公开公布了一款全自研高清电视芯片Hi373V110。这是一款支持全球各种制式的模拟电视（ATV）主处理芯片，内置海思自研32位RISC-V CPU，采用Lite OS操作系统，启动速度快。

该芯片支持NTSC/PAL/SECAM制式解调，USB播放，支持主流的视频格式包括MPGE2、H.264、H.265、RMVB等，主流音频解码及音效处理以及海思自研的SWS音效处理，支持CVBS/YPbPr/VGA/HDMI 1.4输入，合封DDR内存，LVDS和miniLVDS接口，支持主流Tconless屏。

为了帮助推广鸿蒙，华为此前推出了Hi3861 RISC-V开发板。



### 中科院RISK-V“香山”处理器已流片

12月6日，中科院计算所研究员包云岗携高性能RISC-V开源处理器“香山”亮相旧金山RISC-V峰会，包云岗表示，“虽然有些晚，但这是香山第一次在国际RISC-V社区正式亮相，再晚也值得。”

他还透露，“香山”有了新的归属，“香山”出嫁了，至于嫁到哪里，暂时保密，适时会公开，不知道这是否暗示“香山”的商用化已有了方向。

据悉，“香山”第一代内核“雁栖湖”已经在7月15日流片，基于28nm工艺，裸片面积6.6平方毫米，单核二级缓存1MB，预计功耗5W。第二代核心“Nanhu”目标是14nm 2GHz。

性能方面，“雁栖湖”的SPEC CPU2006成绩预计在9@1.3GHz，也就是7/GHz左右，大约相当于ARM A72/A73的水平，后者商用化的杰出代表包括骁龙835、麒麟960/970等，“Nanhu”工艺和频率升级后，预计SPEC 2006得分能到20左右。包云岗称，这套RISC-V架构处理器预计每隔6个月就会迭代一次。



### 平头哥全栈开源RISC-V处理器

在2021云栖大会期间，阿里平头哥宣布全栈开源平头哥玄铁RISC-V系列处理器。这是系列处理器与基础软件的全球首次全栈开源。

据悉，玄铁RISC-V系列是已经拥有150多家客户、超500个授权数，出货超25亿颗的国内应用规模最大的国产CPU IP。

平头哥此次开源的玄铁系列RISC-V IP，都是经过量产验证的IP，包括玄铁E902、E906、C906、C910，以及基于玄铁的多操作系统的全栈软件及工具。

下面看一下近两三个月国际厂商在RISC-V生态建设方面的表现。





### SiFive推RISC-V处理器内核P650

SiFive使用开源RISC-V指令集推出了其最高性能的处理器**P650**，声称是市场上同类架构中最快的内核。

SiFive还聘请了Trefor Southwell担任英国硬件工程高级总监，总部位于布里斯托尔。Southwell之前是Imagination Technologies的硬件工程高级总监，负责RISC-V。

P650处理器面向RISC-V的新市场，如数据中心，因为它可以扩展到每个芯片16个内核和跨多个128个内核，并支持新的RISC-V虚拟机管理程序虚拟化扩展。该内核还针对边缘计算、汽车和移动领域的主流芯片设计。

P650 通过在每个周期发出 40% 的指令（即 4 条指令）来提升性能，而之前的 P550 内核则在相同的 13 级无序管道中发出指令。额外的架构增强功能将最大时钟频率提高到3.5GHz，与SiFive之前最快的处理器相比，总体性能提升超过11+ SPECInt2006/GHz，达到50%。



### Imagination拓展RISC-V疆域

最近，Imagination推出了全新的RISC-V 架构处理器Catapult系列。

Imagination称将为迅速扩大的RISC-V生态系统带来更丰富的的产品和解决方案，并特别针对异构计算系统进行了优化，Catapult CPU可根据性能、效率或两者间平衡等各种应用场景进行配置，使其适用于更广泛的市场。

Catapult系列首发就有四款不同的产品，分别是：动态微控制器、实时嵌入式CPU、高性能应用处理器CPU、支持汽车功能安全的CPU。

其中，微控制器已被客户用于SoC芯片中的GPU模块，开始出货；实时嵌入式CPU现已上市；高性能应用处理器CPU、汽车CPU将于2022年开始陆续上市。

Catapult CPU专为5G基带、存储、辅助驾驶和自动驾驶、数据中心、高性能计算等市场打造，均采用多线程架构，有32位、64位两种版本，并提供大量的可选项，客户可根据每种应用的需求进行配置，比如扩展到每个集群8个非对称相干内核，还可选择添加自定义加速器。



### Fraunhofer将RISC-V拓展至边缘AI

德国的Fraunhofer IPMS为其EMSA5-FS RISC-V处理器开发了一种新选项，以支持边缘的人工智能（AI）和机器学习（ML）功能。

边缘 AI 需要功能强大但功耗超低且相对便宜的片上系统 （SoC）。EMSA5-FS是一款32位、五级流水线处理器，支持RISC-V架构。它可以包括纠错和容错功能。

为了提供高效的AI功能，Fraunhofer IPMS已将TensorFlow Lite移植到核心，并添加了对Zve向量数学扩展的支持。

RISC-V的Zve扩展为微控制器和嵌入式设备提供矢量数学处理。它们能够在小型、低功耗的边缘设备中快速执行要求苛刻的功能，如 AI 和 ML。Fraunhofer IPMS正在使用Zve指令扩展EMSA5-FS内核。





### IAR的RISC-V嵌入式应用工具支持Codasip的处理器内核

IAR Systems正在与处理器内核和工具开发商Codasip合作开发基于RISC-V的低功耗嵌入式应用工具。

用于RISC-V的IAR嵌入式工作台的2.11版本现在支持Codasip的L30和L50节能低功耗嵌入式处理器内核。这些内核是完全可定制的，可以适应项目的独特需求，这需要与开发工具进行更详细的集成。

用于RISC-V的IAR嵌入式工作台是一个完整的C / C++编译器和调试器工具链，集成在一个IDE中。





### 用于RISC-V FPGA的嵌入式边缘视觉开发套件

最近，Microchip Technology推出了第二个开发套件，以简化其PolarFire RISC-V FPGA上AI嵌入式视觉应用的开发。

PolarFire 中端 FPGA 支持双 4K 视频处理，并具有运行实时操作系统 （RTOS） 和 Linux 等丰富操作系统的四核 RISC-V 应用级处理器。

智能嵌入式视觉开发平台加入了VectorBlox软件开发套件（SDK）和IP，用于使用PolarFire器件对经过训练的神经网络进行编程，而无需事先获得FPGA专业知识。

该平台包括对Microchip的Mi-V RISC-V生态系统的支持，包括AdaCore，Green Hills Software，Mentor Graphics和Wind River的开发工具。商用RTOS解决方案包括VxWorks和Nucleus，以及Zephyr和FreeRTOS。中间件解决方案可从DornerWorks，Hex Five和Veridify Security获得。



### 英特尔内部正在开发RISC-V处理器

除了以上提到的已经正式发布的芯片、工具和开源项目之外，还有一些国际龙头企业在秘密进行着RISC-V相关研发工作，英特尔和苹果就是典型代表。

据悉，英特尔内部正在开发首款RISC-V架构处理器，将使用RISC-V厂商SiFive提供的一款RISC-V高效能核心来实作CPU，英特尔更会将它整合到自己最新款的7纳米**Horse Creek处理器**平台。这项消息是在SiFive最新RISC-V产品发布新闻稿中，首度对外透露的。

英特尔院士暨IP工程事业群技术长Amber Huffman指出，他们将会把SiFive的RISC-V高效能核心整合到代号为Horse Creek的英特尔7纳米处理器平台上，并向开发人员和制造商客户展示其性能，英特尔这款7纳米处理器也是首度曝光，有别之前Meteor Lake处理器。透过将英特尔DDR、PCIe界面与SiFive的RISC-V处理器相结合，Horse Creek平台未来能够提供有价值且可扩展的开发工具，用于先进RISC-V应用的发展。

英特尔这次使用的SiFive Performance P550系列，是从之前SiFive U84微架构发展而来，可扩展到4核**complex**配置，面积大小对应到单个Arm Cortex-A75大小，并可兼容64位RISC-V开源指令集架构。

英特尔采用RISC-V核心，估计是作为辅助使用，而非主要CPU，但由于英特尔过去CPU设计采用较为封闭的x86架构，和以开源为主的RISC-V架构有很大差别，所以这次英特尔决定要用SiFive的RISC-V核心开发自己的CPU，也格外引人嘱目。甚至在早之前曾传出，英特尔正在考虑收购SiFive。

不过，传出英特尔收购SiFive的消息，也不让人意外。早在SiFive于2015年成立时，英特尔当时就有在背后大力投资，加上近几年，各种新兴应用出现，对于处理器的使用差异很大，因此强调设计弹性的RISC-V发展也备受重视，当中又以提供商用RISC-V芯片设计服务的SiFive表现最亮眼。而且SiFive公司创办人正是RISC-V专案发起人。该公司商业模式，也跟Arm类似，以提供处理器核心IP产品设计为主，但不同的是，它采用了开源RISC-V指令集架构。

英特尔一直认定自己是从嵌入式产品起家的公司，RISC-V被公认最适合这方面的应用，英特尔自然不会放过。另外，通过建设RISC-V生态系统，还可以牵制Arm，甚至NVIDIA。





### 苹果对 RISC-V 也感兴趣

今年夏天，苹果公司发布招聘信息，要求有RISC-V经验的工程师。这意味着苹果正在研究 RISC-V。

这项工作在苹果的 Vector and Numerics Group 内，该集团在 Mac、iPhone、Apple Watch 和 Apple TV 等产品中设计嵌入式子系统。这可能表明 RISC-V 将用于支持硬件，而不是为计算设备提供动力的主处理器。

苹果已经为这些类型的 AI 任务制作了一个特定的神经引擎，因此这项工作可能与此的未来版本有关。



## 展望

英国嵌入式设计咨询公司ByteSnap Design认为，RISC-V将在2022年起飞。市场将从英特尔架构CPU进一步转向所有主要平台，如Arm-64：苹果，Windows，Chromebook，Linux。最为重要的是，RISC-V笔记本电脑将开始出现。

Nvidia收购Arm之路很难走，如果收购成功的话，预计RISC-V架构将真正开始起飞。

RISC-V最大的应用为物联网，预估到2025年渗透率可达约30%左右，其次为工业用途，预估2025年渗透率可达12%左右。车用IC也是RISC-V的重要应用，2025年渗透率可超过10%。

预估到2025年，基于RISC-V架构的IC数量高达624亿颗，前景一片光明。

